# PWA 使用指南

## 什么是 PWA？

PWA（Progressive Web App，渐进式网络应用）是一种结合了网络应用和原生应用优点的应用形式。

### PWA 的优势

- 📱 **像原生应用一样使用** - 可以安装到主屏幕
- 🔌 **离线支持** - 没有网络也能使用
- ⚡ **快速加载** - 智能缓存策略
- 🔔 **推送通知** - 即时通知用户
- 🔄 **自动更新** - 后台自动同步

---

## 如何安装 PWA

### 📱 在 iPhone 上安装

1. 用 **Safari** 打开应用网址
2. 点击底部的 **分享** 按钮
3. 向上滑动，找到 **"添加到主屏幕"**
4. 点击 **"添加"**
5. 应用会出现在主屏幕上

**提示**: 
- 需要 iOS 11.3 或更高版本
- 可以像原生应用一样使用
- 支持离线访问

### 🤖 在 Android 上安装

#### 方法 1: Chrome 浏览器（推荐）

1. 用 **Chrome** 打开应用网址
2. 点击右上角的 **菜单**（三个点）
3. 点击 **"安装应用"** 或 **"添加到主屏幕"**
4. 确认安装
5. 应用会出现在主屏幕上

#### 方法 2: 手动添加

1. 用任何浏览器打开应用网址
2. 点击菜单 → **"添加到主屏幕"**
3. 输入应用名称
4. 点击 **"添加"**

**提示**:
- 需要 Android 5.0 或更高版本
- Chrome 浏览器提供最佳体验
- 支持离线访问

---

## 功能说明

### 🔌 离线支持

应用会自动缓存：
- 所有页面和导航
- 静态资源（CSS、JavaScript、图片）
- 最近访问的数据

**离线时**:
- ✅ 可以浏览已缓存的页面
- ✅ 可以查看已加载的数据
- ❌ 无法获取新数据
- ❌ 无法执行需要网络的操作

**恢复网络时**:
- 应用会自动同步数据
- 所有操作会自动上传

### 🔔 推送通知

如果启用了推送通知，你会收到：
- 重要更新提醒
- 任务完成通知
- 系统消息

**启用推送通知**:
1. 打开应用
2. 允许通知权限
3. 即使应用关闭也能收到通知

### ⚡ 性能优化

PWA 使用智能缓存策略：

| 资源类型 | 缓存策略 | 说明 |
|---------|---------|------|
| 静态资源 | Cache First | 优先使用缓存，更新时获取新版本 |
| API 数据 | Network First | 优先获取最新数据，离线时使用缓存 |
| 页面 | Network First | 优先加载最新页面，离线时使用缓存 |

---

## 常见问题

### Q: 安装后如何更新应用？

A: PWA 会自动检查更新。当有新版本时：
1. 应用会在后台下载新版本
2. 你会看到"新版本可用"的提示
3. 点击"更新"按钮即可更新

### Q: 离线时无法登录怎么办？

A: 这是正常的。离线时：
- 如果已登录，可以继续使用
- 如果未登录，需要网络连接才能登录
- 恢复网络后可以正常登录

### Q: 如何卸载 PWA？

**iPhone**:
1. 长按应用图标
2. 点击 **"移除"**
3. 选择 **"从主屏幕移除"**

**Android**:
1. 长按应用图标
2. 点击 **"卸载"** 或 **"移除"**
3. 确认卸载

### Q: PWA 占用多少存储空间？

A: 通常 10-50MB，取决于：
- 缓存的页面数量
- 缓存的图片数量
- 应用数据大小

### Q: 可以在多个设备上使用吗？

A: 可以。每个设备都有独立的缓存和数据。

### Q: 如何清除缓存？

**iPhone**:
1. 设置 → Safari
2. 清除历史记录和网站数据

**Android**:
1. Chrome 菜单 → 设置
2. 隐私 → 清除浏览数据

---

## 故障排除

### 问题: 无法安装应用

**解决方案**:
1. 确保使用最新版本的浏览器
2. 检查网络连接
3. 清除浏览器缓存
4. 尝试使用其他浏览器

### 问题: 应用加载缓慢

**解决方案**:
1. 检查网络连接
2. 清除应用缓存
3. 重新启动应用
4. 更新应用到最新版本

### 问题: 离线时无法使用

**解决方案**:
1. 确保应用已完全加载过一次
2. 检查是否有足够的存储空间
3. 尝试重新安装应用

### 问题: 推送通知不工作

**解决方案**:
1. 检查是否允许了通知权限
2. 检查设备的通知设置
3. 重启应用
4. 重新启用通知权限

---

## 技术信息

### 缓存大小限制

- 静态资源缓存: 最多 50 个文件
- API 响应缓存: 最多 100 个响应
- 图片缓存: 最多 60 个图片

### 支持的浏览器

| 浏览器 | iOS | Android |
|--------|-----|---------|
| Safari | ✅ 11.3+ | - |
| Chrome | ✅ | ✅ 5.0+ |
| Firefox | ✅ | ✅ |
| Edge | ✅ | ✅ |

### 数据隐私

- 所有缓存数据存储在本地设备上
- 不会上传到服务器
- 清除应用数据时会删除所有缓存

---

## 获取帮助

如有问题，请：
1. 查看本指南的常见问题部分
2. 检查应用内的帮助文档
3. 联系技术支持

---

**版本**: 1.0  
**最后更新**: 2025-10-22

